const len=784,total_data=1e3,indexs={cats:0,trains:1,rainbows:2};var train_btn,test_btn,guess_btn,clear_btn,labels={},all_training_data=[],all_testing_data=[],epoch=0;const models_urls={rainbows:"data/rainbows1000.npy",cats:"data/cats1000.npy",trains:"data/trains1000.npy"},models={};var canvas,brain,guess_txt,percent;function preload(){for(model_name of Object.keys(models_urls)){const e=models_urls[model_name];models[model_name]={},models[model_name].data_models={},models[model_name].data=loadBytes(e)}}function setup(){speak("Hi"),(canvas=createCanvas(280,280)).id("canvas"),background(255),prepareDatas(),setupElements(),setupLabels(),setupTrainingData(),setupEvents(),brain=new Brain(784,64,3)}function setupTrainingData(){for(let e of Object.keys(models)){const t=models[e];all_training_data=all_training_data.concat(t.data_models.training),all_testing_data=all_testing_data.concat(t.data_models.testing)}}function setupEvents(){canvas.canvas.addEventListener("touchstart",()=>document.body.style.overflow="hidden",{passive:!0}),canvas.canvas.addEventListener("touchmove",()=>document.body.style.overflow="hidden",{passive:!0}),canvas.canvas.addEventListener("touchend",()=>document.body.style.overflow="scroll",{passive:!0}),train_btn.onclick=(()=>{let e=train(all_training_data);epoch++,guess_txt.innerHTML="Training complete !",console.log(epoch.toString()+") Training complete in",e,"ms")}),test_btn.onclick=displaySucessPercent,guess_btn.onclick=displayGuess,clear_btn.onclick=clearAll}function setupElements(){document.getElementById("main").appendChild(canvas.canvas),guess_txt=document.getElementById("guess-text"),train_btn=document.getElementById("train"),test_btn=document.getElementById("test"),guess_btn=document.getElementById("guess"),clear_btn=document.getElementById("clear"),setupDisplayModelsContainer()}function setupDisplayModelsContainer(){const e=document.createElement("div");e.id="display-models-container",document.getElementById("control").appendChild(e);const t=document.createElement("label");t.innerHTML="Display Models",e.appendChild(t);const n=document.createElement("div");n.id="display-models",n.classList.add("hide"),e.appendChild(n);for(let e of Object.keys(models)){const t=models[e],a=document.createElement("button");a.innerHTML=`Display ${e} models`,a.onclick=(()=>draw_doodles(t.data)),n.appendChild(a)}e.onclick=(()=>n.classList.toggle("hide"))}function setupLabels(){for(let e of Object.keys(indexs)){const t=indexs[e];labels[t]=e}}function mousePressed(){drawing()}function mouseDragged(){drawing()}function mouseReleased(){displayGuess()}